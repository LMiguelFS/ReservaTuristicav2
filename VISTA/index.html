<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Agencia de Viajes Cusco</title>
  <script type="text/javascript" src="CSS y JS/script.js"></script>
  <link rel="stylesheet" href="CSS y JS/bootstrap.min.css">
  <link rel="stylesheet" href="CSS y JS/estilos.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark" style="height: 90px;">
    <img class="logo" src="imagenes/logo.png" alt="" width="100" height="100">
    <a href="#" class="navbar-brand"><b style="padding-left: 50px;">TRAVEL AGENCY CUSCO</b></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>  
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
             role="button" data-bs-toggle="dropdown" aria-expanded="false">
            TOURS DISPONIBLES
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li><a class="dropdown-item" href="mapi.html">MACHU PICCHU</a></li>
            <li><a class="dropdown-item" href="maras.html">MARAS SALINERAS</a></li>
            <li><a class="dropdown-item" href="montaña.html">MONTAÑA DE 7 COLORES</a></li>
          </ul>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="#">Contacto <span class="sr-only">(+51 912 345 978)</span></a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Carousel -->
  <div id="demo" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
      <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
      <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="imagenes/machupicchu.webp" class="d-block w-100" alt="Machu Picchu">
        <div class="carousel-caption text-center">
          <h3 class="txtTitulo"><b>MACHU PICCHU</b></h3>
        </div>
      </div>
      <div class="carousel-item">
        <img src="imagenes/2.jpg" class="d-block w-100" alt="Maras Salineras">
        <div class="carousel-caption text-center">
          <h3 class="txtTitulo"><b>MARAS SALINERAS</b></h3>
        </div>
      </div>
      <div class="carousel-item">
        <img src="imagenes/1.jpg" class="d-block w-100" alt="Montaña de 7 Colores">
        <div class="carousel-caption text-center">
          <h3 class="txtTitulo"><b>MONTAÑA DE 7 COLORES</b></h3>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <!-- Presentación -->
  <section class="services">
    <div class="container py-5">
      <div class="section-header text-center text-white">
        <h2 class="Nosotros"><b>PAQUETES TURÍSTICOS CUSCO</b></h2>
        <p class="texto">
          Bienvenidos a Tour Cusco!! Nuestra empresa facilita tu visita a los destinos más importantes de Cusco.<br>
          Encuentra información detallada y actualizada, reserva de forma inmediata y viaja tranquilo.
        </p>
      </div>
    </div>
  </section>

  <!-- Tours disponibles con precios visibles -->
  <section class="container py-5">
    <h3 class="mb-4 text-center">Tours Disponibles</h3>
    <div class="row gx-4 gy-4">
      <!-- Machu Picchu -->
      <div class="col-md-4">
        <div class="card h-100 shadow-sm">
          <img src="imagenes/3.jpg" class="card-img-top" alt="Machu Picchu">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">MACHU PICCHU</h5>
            <p class="card-text flex-grow-1">
              Sitio arqueológico inca más sobresaliente por su diseño urbano, arquitectura y fino trabajo en piedra.
            </p>
            <div class="mb-3">
              <span class="badge bg-primary fs-6">S/ 950 por persona</span>
            </div>
            <a href="mapi.html" class="btn btn-primary mt-auto">CONOCER MÁS...</a>
          </div>
        </div>
      </div>
      <!-- Maras Salineras -->
      <div class="col-md-4">
        <div class="card h-100 shadow-sm">
          <img src="imagenes/2.jpg" class="card-img-top" alt="Maras Salineras">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">MARAS SALINERAS</h5>
            <p class="card-text flex-grow-1">
              Piscinas de sal excavadas en la ladera de la montaña Qaqawiñay, a 46 km de Cusco en el Valle Sagrado.
            </p>
            <div class="mb-3">
              <span class="badge bg-primary fs-6">S/ 180 por persona</span>
            </div>
            <a href="maras.html" class="btn btn-primary mt-auto">CONOCER MÁS...</a>
          </div>
        </div>
      </div>
      <!-- Montaña de 7 Colores -->
      <div class="col-md-4">
        <div class="card h-100 shadow-sm">
          <img src="imagenes/1.jpg" class="card-img-top" alt="Montaña de 7 Colores">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">MONTAÑA DE 7 COLORES</h5>
            <p class="card-text flex-grow-1">
              Vinicunca, la montaña arcoíris, famosa por sus vetas minerales que forman un espectacular arcoíris natural.
            </p>
            <div class="mb-3">
              <span class="badge bg-primary fs-6">S/ 220 por persona</span>
            </div>
            <a href="montaña.html" class="btn btn-primary mt-auto">CONOCER MÁS...</a>
          </div>
        </div>
      </div>
    </div>
  </section>

   <!-- Cotización y Reserva -->
   <section class="mx-auto my-5" style="max-width: 900px;">
    <div class="card shadow-lg border-0 overflow-hidden">
      <div class="card-body p-4">
        <h4 class="card-title text-center mb-4">Cotiza y Reserva tu Tour</h4>

        <!-- FORMULARIO Cotización + Reserva -->
        <form id="formReserva" class="row gy-3">
          <div class="col-12 form-floating">
            <select id="tourSel" class="form-select" required>
              <option value="" disabled selected>Elige un Tour</option>
              <option value="Machu Picchu" data-precio="950">Machu Picchu</option>
              <option value="Maras Salineras" data-precio="180">Maras Salineras </option>
              <option value="Montaña de 7 Colores" data-precio="220">Montaña de 7 Colores </option>
            </select>
            <label for="tourSel">Tour</label>
          </div>
          <div class="col-12 form-floating">
            <input type="number" id="qty" class="form-control" min="1" required>
            <label for="qty">Cantidad de Personas</label>
          </div>
          <div class="col-12 form-floating">
            <input type="email" id="email" class="form-control" placeholder=" " required>
            <label for="email">Correo Electrónico</label>
          </div>
          <div class="col-12 form-floating">
            <input type="tel" id="telefono" class="form-control" placeholder=" " pattern="\d{7,10}" required>
            <label for="telefono">Teléfono</label>
          </div>
          <div class="col-6 text-center">
            <button type="button" id="btnCotizar" class="btn btn-outline-info w-100">Calcular</button>
          </div>
          <div class="col-6 text-center">
            <button type="button" id="btnReservar" class="btn btn-info w-100">Reservar</button>
          </div>
        </form>

        <!-- Resultado de cotización -->
        <div id="resultado" class="mt-4 text-center p-3 rounded opacity-0 transition-opacity"></div>

        <hr class="my-4">

        <!-- Historial -->
        <h5 class="text-center mb-3">Ver Historial de Reservas</h5>
        <div class="input-group mb-3">
          <input type="email" id="emailHist" class="form-control" placeholder="Tu correo" required>
          <button class="btn btn-secondary" id="btnHist">Ver Historial</button>
        </div>
        <ul id="historialList" class="list-group"></ul>

      </div>
    </div>
  </section>

  <style>
    .transition-opacity { transition: opacity .5s ease; }
    .opacity-1 { opacity: 1 !important; }
  </style>

  <script>
    // Helpers
    const fadeIn = el => { el.classList.add('opacity-1'); };
    const fadeOut = el => { el.classList.remove('opacity-1'); };

    // Elementos
    const tourSel = document.getElementById('tourSel');
    const qty     = document.getElementById('qty');
    const email   = document.getElementById('email');
    const tel     = document.getElementById('telefono');
    const btnCot  = document.getElementById('btnCotizar');
    const btnRes  = document.getElementById('btnReservar');
    const resDiv  = document.getElementById('resultado');
    const emailH  = document.getElementById('emailHist');
    const btnHist = document.getElementById('btnHist');
    const histUl  = document.getElementById('historialList');

    // Calcular cotización
    btnCot.addEventListener('click', () => {
      const opt = tourSel.selectedOptions[0];
      const p   = +opt.dataset.precio;
      const n   = +qty.value;
      if (!opt.value || !n) {
        resDiv.innerHTML = '<div class="alert alert-warning mb-0">Selecciona tour y cantidad válidos.</div>';
      } else {
        const tot = p * n;
        resDiv.innerHTML = `
          <div class="alert alert-success mb-0">
            <p><strong>${opt.value}</strong></p>
            <p>Personas: ${n}</p>
            <p>Precio unitario: S/ ${p}</p>
            <hr>
            <p><strong>Total: S/ ${tot}</strong></p>
          </div>`;
      }
      fadeIn(resDiv);
    });

    // Reservar y guardar en LocalStorage
    btnRes.addEventListener('click', () => {
      const opt = tourSel.selectedOptions[0];
      const p   = +opt.dataset.precio;
      const n   = +qty.value;
      const em  = email.value.trim();
      const ph  = tel.value.trim();
      if (!opt.value || !n || !em || !ph) {
        alert('Completa todos los campos.');
        return;
      }
      const tot = p * n;
      // Leer array existente
      const arr = JSON.parse(localStorage.getItem('reservas')) || [];
      arr.push({
        tour: opt.value, personas: n, precio: p, total: tot,
        correo: em, telefono: ph, fecha: new Date().toLocaleString()
      });
      localStorage.setItem('reservas', JSON.stringify(arr));
      alert('Reserva guardada exitosamente.');
      document.getElementById('formReserva').reset();
      fadeOut(resDiv);
    });

    // Mostrar historial por correo
    btnHist.addEventListener('click', () => {
      const em = emailH.value.trim();
      const arr = JSON.parse(localStorage.getItem('reservas')) || [];
      histUl.innerHTML = '';
      const userRes = arr.filter(r => r.correo === em);
      if (!userRes.length) {
        histUl.innerHTML = '<li class="list-group-item">No hay reservas para este correo.</li>';
      } else {
        userRes.forEach(r => {
          histUl.innerHTML += `
            <li class="list-group-item">
              <strong>${r.tour}</strong> — ${r.personas} personas — Total S/ ${r.total}<br>
              <small>${r.fecha}</small>
            </li>`;
        });
      }
    });
  </script>
<!-- tdfn -->


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
